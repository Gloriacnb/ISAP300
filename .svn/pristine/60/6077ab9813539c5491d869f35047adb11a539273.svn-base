/*
 * DCCSdhSnd.cpp
 *
 *  Created on: 2013-6-28
 *      Author: Administrator
 */

#include "DCCSdhSnd.h"
//#include "MidoptDCC.h"
#include "UID.h"
#include "DriverPCM.h"


DCCSdhSnd::DCCSdhSnd(uint32 uid, uint32 OptPortID, DriverPCM& pcm) : DCCChannelSnd(uid, OptPortID), chip(pcm) {
	// TODO Auto-generated constructor stub
}

DCCSdhSnd::~DCCSdhSnd() {
	// TODO Auto-generated destructor stub
}

void DCCSdhSnd::sendData(uint8* d, uint32 len) {
	uint32 uid = getUID();
	int sn = uid & 0xff;
	if( sn == 0 ) {
	    chip.DccSendPacket(DCC_A, d, len);
	}
	else if( sn == 1 ) {
	    chip.DccSendPacket(DCC_B, d, len);
	}
}
