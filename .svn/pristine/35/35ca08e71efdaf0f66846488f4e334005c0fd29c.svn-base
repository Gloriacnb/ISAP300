/*
 * SwitchPortInner.h
 *
 *  Created on: 2013-6-25
 *      Author: Administrator
 */

#ifndef SWITCHPORTINNER_H_
#define SWITCHPORTINNER_H_

#include "SwitchPort.h"
#include <map>
#include "os.h"

class DCCChannelRcv;
class DCCChannelSnd;
class SwitchPortInner : public SwitchPort {
	static uint32 pSnBase;
	SwitchPortInner();
public:
	SwitchPortInner(uint32 sn);
	virtual ~SwitchPortInner();

	virtual int outputPacket(PriPacket& pkg);

	void addDcc(DCCChannelRcv*);
	void addDcc(DCCChannelSnd*);

	void removeDcc(DCCChannelRcv*);
	void removeDcc(DCCChannelSnd*);

    virtual bool ifDropThePacket(PriPacket& pkt);
private:
	friend class InnerDCCManager;
	std::map<uint32, DCCChannelRcv*> dccRcv;
	std::map<uint32, DCCChannelSnd*> dccSnd;
	uint8 ch[1024];
};

#endif /* SWITCHPORTINNER_H_ */
